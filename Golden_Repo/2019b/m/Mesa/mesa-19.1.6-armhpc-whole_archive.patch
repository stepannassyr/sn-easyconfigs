diff -urN mesa-19.1.6/src/gallium/targets/dri/meson.build mesa-19.1.6-patched/src/gallium/targets/dri/meson.build
--- mesa-19.1.6/src/gallium/targets/dri/meson.build	2019-09-03 12:54:50.000000000 +0200
+++ mesa-19.1.6-patched/src/gallium/targets/dri/meson.build	2019-09-10 20:03:40.871770640 +0200
@@ -48,8 +48,9 @@
   cpp_args : [cpp_vis_args],
   link_args : [ld_args_gc_sections, gallium_dri_ld_args],
   link_depends : gallium_dri_link_depends,
+  link_whole : [libmesa_gallium, libgallium, libmesa_util, libpipe_loader_static],
   link_with : [
-    libmesa_gallium, libdricommon, libmegadriver_stub, libdri, libgalliumvl,
+    libdricommon, libmegadriver_stub, libdri, libgalliumvl,
     libgallium, libglapi, libpipe_loader_static, libws_null, libwsw, libswdri,
     libswkmsdri,
   ],
diff -urN mesa-19.1.6/src/gallium/targets/osmesa/meson.build mesa-19.1.6-patched/src/gallium/targets/osmesa/meson.build
--- mesa-19.1.6/src/gallium/targets/osmesa/meson.build	2019-09-03 12:54:50.000000000 +0200
+++ mesa-19.1.6-patched/src/gallium/targets/osmesa/meson.build	2019-09-10 20:03:40.871770640 +0200
@@ -43,9 +43,9 @@
     inc_gallium_drivers,
   ],
   link_depends : osmesa_link_deps,
-  link_whole : [libosmesa_st, libglapi_static],
+  link_whole : [libosmesa_st, libglapi_static, libmesa_util, libgallium],
   link_with : [
-    libmesa_gallium, libgallium, libws_null, osmesa_link_with,
+    libmesa_gallium, libws_null, osmesa_link_with,
   ],
   dependencies : [
     dep_selinux, dep_thread, dep_clock, dep_unwind,
diff -urN mesa-19.1.6/src/gbm/meson.build mesa-19.1.6-patched/src/gbm/meson.build
--- mesa-19.1.6/src/gbm/meson.build	2019-09-03 12:54:50.000000000 +0200
+++ mesa-19.1.6-patched/src/gbm/meson.build	2019-09-10 20:03:40.861770595 +0200
@@ -49,7 +49,8 @@
   include_directories : incs_gbm,
   c_args : [c_vis_args, args_gbm],
   link_args : [ld_args_gc_sections],
-  link_with : [libloader, libmesa_util, libxmlconfig],
+  link_whole : libmesa_util,
+  link_with : [libloader, libxmlconfig],
   dependencies : [deps_gbm, dep_dl, dep_thread],
   version : '1.0.0',
   install : true,
diff -urN mesa-19.1.6/src/glx/meson.build mesa-19.1.6-patched/src/glx/meson.build
--- mesa-19.1.6/src/glx/meson.build	2019-09-03 12:54:50.000000000 +0200
+++ mesa-19.1.6-patched/src/glx/meson.build	2019-09-10 20:03:40.851770550 +0200
@@ -155,7 +155,7 @@
   gl_lib_name,
   [],
   link_with : [libglapi_static, libglapi],
-  link_whole : libglx,
+  link_whole : [libglx, libmesa_util],
   link_args : [ld_args_bsymbolic, ld_args_gc_sections, extra_ld_args_libgl],
   dependencies : [
     dep_libdrm, dep_dl, dep_m, dep_thread, dep_x11, dep_xcb_glx, dep_xcb,
